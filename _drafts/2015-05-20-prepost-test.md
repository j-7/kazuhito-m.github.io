---
published: false
layout: post
title: 人生初プルリクをOSSに投げ込んでみた結果
category: tech
tags: [test,dbunit]
---

![親方！サイトに俺の名前がっ！](/images/baban.png)

少し前の話しなのですが…もうなんだか「ちびりそうに嬉しかった」ので、恥ずかしながら書いていきます。

# OSSのプロダクトに自分の変更を取り込んでいただきました

仕事で使う目的で家でちょこちょこ触っていました「Dbunt」に、俺の変更を取り込んでいただきました。

([ここ](http://dbunit.sourceforge.net/changes-report.html#a2.5.1)の "Upgrade Apache POI library from ..." が「自分のプルリクの内容」とです。)

# 自分、よく考えたら他人に"pull request"とかしたこと無かったんです

よく考えなくともですが、仕事でgit使った事ないし、多人数開発してないし、GitHubの垢るけど他人にプルリク投げたことないし…。

そういう初物づくしだったけど「ま、こんだけ初物だらけやったらミスっても凹まんやろ」
ってのと「そろそろ禊が必要かな？」って思ってたので、勢い出してやってみたです。

# 経緯

ざっくり言えば「DBUnitのExcel読み書きを、xlsx形式にも対応した」だけです。

ドSIerな現場で「自動テストの事前条件流し込みの仕組みを考える」という仕事をした際に、
「皆が使えるつったらExcelだよな…」ということから、横の人に「死んだプロダクトを？いまさら？w」
と言われつつも、DBUnitを使う事としました。

で、現場ではExcel2007だったので「xlsxで書いてもらえばいいか…」と思っていたのですが、
DBUnitは2000以前形式であるxls形式にしか対応していなかったんです。

内部でExcelの読み書きに使っているPOIは、早々と対応していたし、
「対応する」というイシューも数年前に出てる…のに頓挫しているようでした。

そこで、自身の仕事の進みも関係あるので、直してプルリクしよう！と思ったのが発端です。

TODO

# 具体的な変更点と利用方法

TODO

# 頓挫していた(と思しき)理由

TODO


# 気をつけたこと

すべては「英語でのやりとり」につきます。

経緯から「ありのままを伝わるカタチで書かないと蹴られるor無視されるだろう」と推測したので…

0. 
0. 
0. 

と「理由や経緯や願いを書く機会」があったのですが、すべてで

+ できるだけ具体的に細かく
+ 思いの部分以外は公正に
+ 翻訳サイト２つ以上で、日->英->日して「意味が変わってない」のを確認する

を行い、プルリクに望みました。

---

プログラムについては

0. テストを適切につける
0. 下位互換を死守する

を心がけました。

---

経緯的に「Issueの最初の人がテスト無しで蹴られている」ので、テストが「適切なカタチ」で存在しないと受け入れられないだろうと。

とはいえ…

+ テストが無駄に多すぎてもダメ
+ 足りなくてもダメ
+ 意味が伝わらなくてもダメ
+ 自身のテストスキルはゴミクズ(自分の考えは信用出来ない)

なので、受け入れられるのは難しいと思っていました。

ただし、変更の特性が「既存のものにもう1パターン対応する」性質のものだったので、

+ 既存のテストをコピーして増やす

に徹しました。(普通はアカンけど)

---

無論のことながら「よく知られ利用者も多い(だろう多分、だって俺でも知って使ってるもん)プロダクト」なので
「既存の仕様をビタ一文変更してはならない」と心に決めて対応しました。

上にも書きましたが、



# なんだかんだで「言いたかった事」は！

なんとなく、記事中から「ドヤ顔ダブルピース」な感じが出てるのはなんとなく自覚の上ですが…。

「初老」だろうが「人生初」だろうが「トイメンが英語な人ら」だろうが「有名・無名」だろうが「変更内容がカスみたいなモノ」だろうが…
「とりあえず変更を投げてみた」ら良いと思ったんです。

受け入れられると超ハッピー！で、受け入れられなくとも経験になるし、なんか臆してたのがもったいないと思いまして。


たとえば…　TODO

俺みたいな「底辺ギョームプログラマー」でも(時と場合により)世界は優しいです。

---

以上、嬉しかった体験報告でした。

# 参考

以下を参考にさせていただきました。ありがとうございます。

+ [http://qiita.com/wheatter/items/77dc40e0bb526660af3a](http://qiita.com/wheatter/items/77dc40e0bb526660af3a)
+ []()
+ []()
+ []()
+ []()

